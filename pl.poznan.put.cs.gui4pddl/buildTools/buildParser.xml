<!-- this file should not be invoked separately.
     it is called by customBuildCallbacks and 
     project's custom builder -->

<project name="Generate parser sources from grammar files" default="antlr">
	
	<target name="antlr.check">
		<condition property="parser.uptodate" >
			<and>
				<uptodate srcfile="src/pl/poznan/put/cs/gui4pddl/parser/PDDL.g"
					targetfile="src/pl/poznan/put/cs/gui4pddl/parser/PDDLParser.java"/>
				<uptodate srcfile="src/pl/poznan/put/cs/gui4pddl/parser/PDDL.g"
					targetfile="src/pl/poznan/put/cs/gui4pddl/parser/PDDLLexer.java"/>
			</and>
		</condition>
	</target>
	
	<target name="antlr" depends="antlr.check" unless="parser.uptodate">
		
		<java classname="org.antlr.Tool" fork="true" failonerror="true">
				
				<arg value="-verbose" />
				<arg value="-o" />
				<arg path="src/pl/poznan/put/cs/gui4pddl/parser" />
				<arg path="src/pl/poznan/put/cs/gui4pddl/parser/PDDL.g" />
				
				<classpath>
					<pathelement location="buildTools/antlr-3.5-complete-no-st3.jar"/>
				</classpath>
		</java>
	</target>
</project>

